/**
 * Ravi Gaddipati
 * rgaddip1@jhu.edu
 * Mar 1, 2017 
 *
 * Example Graph with two disjoint graphs:
 *
 * (1)        T         (2)
 *           / \
 * AAAAA->GGG   GCGC      ACGTACGAC
 *           \ /
 *            C
 *
 * Though there are comments in this file, comments are not supported.
 * Each file defines one FASTA and an optional VCF file, and any subgraphs derived
 * from it.
 * conventions: No space in keys, all lowercase
 */
{
    
     // Meta information inserted at graph generation time
    "meta": {
        "vargas-build" : "vargas_build_date",
        "date" : "graph_build_date",
        "fasta" : "example.fa",
        "vcf" : "example.bcf", // optional
        "samples" : ["sample1", "sample2"] // only if "vcf" is present
    },

    
    // Maps each node ID to the node
    // pos is the 1 based position of the last base in the seq.
    // z indicates if it is a convergence node, i.e. all paths pass through the node
    "nodes": {
        "0" : {"pos": 5, "af" : 1.0, "z" : true, "seq" : "AAAAA"},
        "1" : {"pos": 8, "af" : 1.0, "z" : true, "seq" : "GGG"},
        "2" : {"pos": 9, "af" : 0.5, "z" : false, "seq" : "C"},
        "3" : {"pos": 9, "af" : 0.5, "z" : false, "seq" : "T"},
        "4" : {"pos": 13, "af" : 1.0, "z" : true, "seq" : "GCGC"},
        "5" : {"pos" : 22, "af" : 1.0, "z" : true, "seq" : "ACGTACGAC"} // Note true pos is 22 - offset (13) = 9
        // ... for all nodes
    },

    /*
     * Contigs that the nodes cover. The contig that a node comes from
     * is determined by largest offset that is less than the position - seq-length.
     * e.g node 5 has a origin position of 22 - 9 + 1 = 14. 13 is largest offset 
     * less than 14, so the node belongs to contig chr2 with true end position
     * at 22 - 13 = 9.
     */
    "contigs": {
        "chr1" : 0, // Positions in nodes are offset by this amount. 
        "chr2" : 13
        // ... for all chromosomes
    },

    "graphs": {
        // At minimum, base is defined. Keys should correspond to those found in
        // ["meta"]["subgraph-def"]
        "base" : {
            "def" : {
                "parent" : null, // Derived from parent graph
                "invert" : false, // Derived from complement of parent
                "population" : [1,1], // Population, length is len(["samples"])
                // List of regions in graph
                "region" : [{"chr": "chr1", "min" : 0, "max" : 0}, {"chr":"chr2","min":0,"max":0}],
                "snp" : true, // Only include snps, if !linear
                "min-af" : 0, // min allele frequency, if !linar
                "max-af" : 0, // 0 means no limit, if !linear
                "linear" : true,
                "filter" : "ref" // if linear, REF or MAXAF
            },
            // Node ID's, sorted topographically
            "nodes" : [0,1,2,3,4,5],
            // List of outgoing edges
            "fwd" : {
                "0" : [1], // 0 -> 1
                "1" : [2,3],
                "2" : [4],
                "3" : [4],
                "4" : [5]
            }
        }
        // ... For all subgraphs
    }
}